race_code = "Race Code",
cause_of_death = "ICD-10 113 Cause List",
cause_of_death_code = "ICD-10 113 Cause List Code")
cdc <- cdc_raw %>%
#remove redundant, uncessary columns
select(-c("Year Code", "Ten-Year Age Groups Code", "Gender Code")) %>%
#NA in these data sets is coded as "Unreliable"
#rename column names
dplyr::rename(
deaths=Deaths,
year=Year,
gender=Gender,
age_group= "Ten-Year Age Groups",
population= Population,
crude_rate = "Crude Rate",
race = Race,
race_code = "Race Code",
cause_of_death = "ICD-10 113 Cause List",
cause_of_death_code = "ICD-10 113 Cause List Code")
cdc <- cdc_raw %>%
#remove redundant, uncessary columns
select(-c("Year Code", "Ten-Year Age Groups Code", "Gender Code")) %>%
#NA in these data sets is coded as "Unreliable"
na_if("Unreliable") %>%
#rename column names
dplyr::rename(
deaths=Deaths,
year=Year,
gender=Gender,
age_group= "Ten-Year Age Groups",
population= Population,
crude_rate = "Crude Rate",
race = Race,
race_code = "Race Code",
cause_of_death = "ICD-10 113 Cause List",
cause_of_death_code = "ICD-10 113 Cause List Code")
glimpse(cdc)
cdc$cause_of_death <- as.factor(cdc$cause_of_death)
cdc$cause_of_death_code <- as.factor(cdc$cause_of_death_code)
cdc$year <- as.factor(cdc$year)
cdc$state <- as.factor(cdc$state)
cdc$cause_of_death <- as.factor(cdc$cause_of_death)
cdc$cause_of_death_code <- as.factor(cdc$cause_of_death_code)
cdc$year <- as.factor(cdc$year)
cdc$race <- as.factor(cdc$race)
cdc$race_code <- as.factor(cdc$race_code)
cdc$gender <- as.factor(cdc$gender)
cdc$age_group <- as.factor(cdc$age_group)
cdc$deaths <- as.numeric(cdc$deaths)
glimpse(cdc)
cdc$cause_of_death <- as.factor(cdc$cause_of_death)
cdc$cause_of_death_code <- as.factor(cdc$cause_of_death_code)
cdc$year <- as.factor(cdc$year)
cdc$race <- as.factor(cdc$race)
cdc$race_code <- as.factor(cdc$race_code)
cdc$gender <- as.factor(cdc$gender)
cdc$age_group <- as.factor(cdc$age_group)
cdc$deaths <- as.numeric(cdc$deaths)
cdc$population <- as.numeric(cdc$population)
glimpse(cdc)
#CLEAN DATA
cdc <- cdc_raw %>%
#remove redundant, uncessary columns
select(-c("Year Code", "Ten-Year Age Groups Code", "Gender Code")) %>%
#NA in these data sets is coded as "Unreliable" or "Not Applicable
na_if("Unreliable") %>%
na_if("Not Applicable") %>%
#rename column names
dplyr::rename(
deaths=Deaths,
year=Year,
gender=Gender,
age_group= "Ten-Year Age Groups",
population= Population,
crude_rate = "Crude Rate",
race = Race,
race_code = "Race Code",
cause_of_death = "ICD-10 113 Cause List",
cause_of_death_code = "ICD-10 113 Cause List Code")
glimpse(cdc)
cdc$cause_of_death <- as.factor(cdc$cause_of_death)
cdc$cause_of_death_code <- as.factor(cdc$cause_of_death_code)
cdc$year <- as.factor(cdc$year)
cdc$race <- as.factor(cdc$race)
cdc$race_code <- as.factor(cdc$race_code)
cdc$gender <- as.factor(cdc$gender)
cdc$age_group <- as.factor(cdc$age_group)
cdc$deaths <- as.numeric(cdc$deaths)
cdc$population <- as.numeric(cdc$population)
glimpse(cdc)
levels(race)
levels(cdc$race)
levels(cdc$cause_of_death)
write.csv(cdc, file="data/cdcwonder.csv")
cdc_test <- readr::read_csv("data/cdcwibder.csv")
cdc_test <- readr::read_csv("data/cdcwonder.csv")
cdc_test <- readr::read_csv("data/cdcwonder.csv", col_types = cols(X1 = col_skip()))
View(cdc_test)
View(cdc_test)
glimpse(cdc_test)
#Make a new .csv master file
write.csv(cdc, file="data/cdc.csv")
levels(cdc$year)
levels(cdc$cause_of_death)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)")
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year, gender) %>%
summarise(
total_deaths = sum(deaths)
)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year, gender) %>%
summarise(
total_deaths = sum(deaths)) %>%
ggplot(aes(x=year, y=total_deaths, color=gender)+geom_line()
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year, gender) %>%
summarise(
total_deaths = sum(deaths)) %>%
ggplot(aes(x=year, y=total_deaths, color=gender))+geom_line()
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year, gender) %>%
summarise(
total_deaths = sum(deaths)) %>%
ggplot(aes(x=year, y=total_deaths, color=gender, group_by(1)))+geom_line()
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year, gender) %>%
summarise(
total_deaths = sum(deaths)) %>%
ggplot(aes(x=year, y=total_deaths, color=gender, group=1))+geom_line()
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year, gender) %>%
summarise(
total_deaths = sum(deaths)) %>%
ggplot(aes(x=year, y=total_deaths, group=1))+geom_line()
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
total_deaths = sum(deaths)) %>%
ggplot(aes(x=year, y=total_deaths, group=1))+geom_line()
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
total_deaths = sum(deaths))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
total_deaths = sum(deaths)) %>%
ggplot(aes(x=year, y=total_deaths, group=1))+geom_line()
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
total_deaths = sum(deaths))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
total_deaths = sum(deaths))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
total_deaths = sum(deaths),
fraction= total_deaths/population
)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
total_deaths = sum(deaths),
fraction= (total_deaths/population)*100
)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated")
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated")
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()
levels(cdc$cause_of_death)
cdc %>%
filter(cause_of_death == "Accidental discharge of firearms (W32-W34)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Gun Suicide")
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, margin = margin(t=15)),
axis.text = element_text(size = 12),
axis.title = element_text(size = 12),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, margin = margin(t=15)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, margin = margin(t=20)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling", y=Percent of Population)+
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling", y="Percent of Population")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Intentional self-harm (suicide) by discharge of firearms (X72-X74)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Death by Falling", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year, gender) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year, gender)
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population, na.rm = T),
total_deaths = sum(deaths, na.rm = T),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
filter(age_group != "Not Stated") %>%
group_by(year) %>%
summarise(
population = sum(population),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
#In the Data, N.S. age groups included in the population of all existing age groups.
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(year) %>%
summarise(
population = sum(population, na.rm=T),
#In the Data, N.S. age groups included in the population of all existing age     groups. So it is OK to remove the NA   values because it will product the same result.
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=year, y=percent, group=1))+geom_line()+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
cdc %>%
filter(cause_of_death == "Falls (W00-W19)") %>%
group_by(age_group) %>%
summarise(
population = sum(population, na.rm=T),
#In the Data, N.S. age groups included in the population of all existing age     groups. So it is OK to remove the NA   values because it will product the same result.
total_deaths = sum(deaths),
percent= (total_deaths/population)*100
) %>%
ggplot(aes(x=age_group, y=percent, group=1))+geom_bar(stat="identity")+labs(title="Falling Deaths in The United States", y="Percent of Population", x="Year")+
theme(plot.title = element_text(size = 14, face = "bold", vjust = 3.5, hjust=.5, margin = margin(t=15, b=10)),
axis.title.y = element_text(margin = margin(t = 0, r = 15, b = 0, l = 0)),
axis.title.x = element_text(margin = margin(t = 10, r = 0, b = 0, l = 0)))
